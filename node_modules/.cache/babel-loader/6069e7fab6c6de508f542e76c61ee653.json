{"ast":null,"code":"'use strict'; // Adam 7\n//   0 1 2 3 4 5 6 7\n// 0 x 6 4 6 x 6 4 6\n// 1 7 7 7 7 7 7 7 7\n// 2 5 6 5 6 5 6 5 6\n// 3 7 7 7 7 7 7 7 7\n// 4 3 6 4 6 3 6 4 6\n// 5 7 7 7 7 7 7 7 7\n// 6 5 6 5 6 5 6 5 6\n// 7 7 7 7 7 7 7 7 7\n\nvar imagePasses = [{\n  // pass 1 - 1px\n  x: [0],\n  y: [0]\n}, {\n  // pass 2 - 1px\n  x: [4],\n  y: [0]\n}, {\n  // pass 3 - 2px\n  x: [0, 4],\n  y: [4]\n}, {\n  // pass 4 - 4px\n  x: [2, 6],\n  y: [0, 4]\n}, {\n  // pass 5 - 8px\n  x: [0, 2, 4, 6],\n  y: [2, 6]\n}, {\n  // pass 6 - 16px\n  x: [1, 3, 5, 7],\n  y: [0, 2, 4, 6]\n}, {\n  // pass 7 - 32px\n  x: [0, 1, 2, 3, 4, 5, 6, 7],\n  y: [1, 3, 5, 7]\n}];\n\nexports.getImagePasses = function (width, height) {\n  var images = [];\n  var xLeftOver = width % 8;\n  var yLeftOver = height % 8;\n  var xRepeats = (width - xLeftOver) / 8;\n  var yRepeats = (height - yLeftOver) / 8;\n\n  for (var i = 0; i < imagePasses.length; i++) {\n    var pass = imagePasses[i];\n    var passWidth = xRepeats * pass.x.length;\n    var passHeight = yRepeats * pass.y.length;\n\n    for (var j = 0; j < pass.x.length; j++) {\n      if (pass.x[j] < xLeftOver) {\n        passWidth++;\n      } else {\n        break;\n      }\n    }\n\n    for (j = 0; j < pass.y.length; j++) {\n      if (pass.y[j] < yLeftOver) {\n        passHeight++;\n      } else {\n        break;\n      }\n    }\n\n    if (passWidth > 0 && passHeight > 0) {\n      images.push({\n        width: passWidth,\n        height: passHeight,\n        index: i\n      });\n    }\n  }\n\n  return images;\n};\n\nexports.getInterlaceIterator = function (width) {\n  return function (x, y, pass) {\n    var outerXLeftOver = x % imagePasses[pass].x.length;\n    var outerX = (x - outerXLeftOver) / imagePasses[pass].x.length * 8 + imagePasses[pass].x[outerXLeftOver];\n    var outerYLeftOver = y % imagePasses[pass].y.length;\n    var outerY = (y - outerYLeftOver) / imagePasses[pass].y.length * 8 + imagePasses[pass].y[outerYLeftOver];\n    return outerX * 4 + outerY * width * 4;\n  };\n};","map":null,"metadata":{},"sourceType":"script"}