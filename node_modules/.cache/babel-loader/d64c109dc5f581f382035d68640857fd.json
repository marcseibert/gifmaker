{"ast":null,"code":"var _jsxFileName = \"/Users/marcseibert/Documents/Development/web/coding-challenge-react/gifmaker/src/components/PreviewWindow.js\";\nimport gifshot from '../lib/gifshot.js';\nimport React from 'react';\nimport { Box, Grid, Button } from 'grommet';\nimport gifFrames from 'gif-frames';\nimport { connect } from 'react-redux';\nimport { object } from 'prop-types';\nvar currentPreview;\nvar currentPreviewURL = \"\";\n\nconst CreatePreviewGIF = timeline => {\n  var frames = [];\n\n  for (let i = 0; i < timeline.length; i++) {\n    let url = URL.createObjectURL(timeline[i].shot);\n    frames.push(url);\n    /*\n    gifFrames({url, frames: 'all', outputType: 'png'}, (err, frameData) => {\n        if(err) {\n            throw err\n        }\n        var newFrames = frameData.map((item) => item.getImage())\n        console.log(newFrames)\n        frames = newFrames\n         if(i == timeline.length - 1) {\n            console.log(frames)\n            var urls = frames.map((image) => URL.createObjectURL(image))\n            console.log(urls)\n         }\n    })*/\n  }\n\n  console.log(frames);\n  let result;\n  gifshot.createGIF({\n    \"images\": frames\n  }, function (obj) {\n    if (!obj.error) {\n      console.log(\"No error\");\n      result = obj.image;\n      console.log(obj);\n    } else {\n      console.log(obj.error);\n    }\n  });\n  return \"\";\n  currentPreview = result;\n  console.log(result);\n  return URL.createObjectURL(result);\n};\n\nexport const PreviewWindowComponent = ({\n  timeline\n}) => {\n  var gifURL = timeline.length > 0 ? URL.createObjectURL(timeline[0].shot) : \"\";\n\n  if (timeline.length > 0) {\n    gifURL = CreatePreviewGIF(timeline); //gifURL = currentPreviewURL//gif //URL.createObjectURL(gif)\n  }\n\n  return React.createElement(Box, {\n    fill: true,\n    align: \"center\",\n    justify: \"center\",\n    gap: \"small\",\n    background: \"dark-1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(Box, {\n    width: \"medium\",\n    height: \"medium\",\n    background: \"dark-3\",\n    style: {\n      backgroundImage: \"url(\".concat(gifURL, \")\"),\n      backgroundSize: 'cover',\n      backgroundRepeat: 'no-repeat',\n      backgroundPosition: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }), React.createElement(Box, {\n    round: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    fill: true,\n    areas: [{\n      name: \"back\",\n      start: [0, 0],\n      end: [0, 0]\n    }, {\n      name: \"play\",\n      start: [1, 0],\n      end: [1, 0]\n    }, {\n      name: \"toEnd\",\n      start: [2, 0],\n      end: [2, 0]\n    }],\n    columns: [\"flex\", \"flex\", \"flex\"],\n    rows: [\"flex\"],\n    gap: \"small\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, React.createElement(Button, {\n    gridArea: \"back\",\n    label: \"|<\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }), React.createElement(Button, {\n    gridArea: \"play\",\n    label: \">\",\n    primary: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }), React.createElement(Button, {\n    gridArea: \"toEnd\",\n    label: \">|\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }))));\n};\n\nconst mapStateToProps = state => ({\n  timeline: state.timeline\n});\n\nconst mapDispatchToProps = dispathc => ({});\n\nexport const PreviewWindow = connect(mapStateToProps, mapDispatchToProps)(PreviewWindowComponent);","map":{"version":3,"sources":["/Users/marcseibert/Documents/Development/web/coding-challenge-react/gifmaker/src/components/PreviewWindow.js"],"names":["gifshot","React","Box","Grid","Button","gifFrames","connect","object","currentPreview","currentPreviewURL","CreatePreviewGIF","timeline","frames","i","length","url","URL","createObjectURL","shot","push","console","log","result","createGIF","obj","error","image","PreviewWindowComponent","gifURL","backgroundImage","backgroundSize","backgroundRepeat","backgroundPosition","name","start","end","mapStateToProps","state","mapDispatchToProps","dispathc","PreviewWindow"],"mappings":"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","sourcesContent":["import gifshot from '../lib/gifshot.js'\nimport React from 'react'\nimport { Box, Grid, Button } from 'grommet'\nimport gifFrames from 'gif-frames'\nimport { connect } from 'react-redux'\nimport { object } from 'prop-types'\n\nvar currentPreview\nvar currentPreviewURL = \"\"\n\nconst CreatePreviewGIF = (timeline) => {\n    var frames = []\n    for(let i = 0; i < timeline.length; i++) {\n        let url = URL.createObjectURL(timeline[i].shot)\n        frames.push(url)\n        /*\n        gifFrames({url, frames: 'all', outputType: 'png'}, (err, frameData) => {\n            if(err) {\n                throw err\n            }\n            var newFrames = frameData.map((item) => item.getImage())\n            console.log(newFrames)\n            frames = newFrames\n\n            if(i == timeline.length - 1) {\n                console.log(frames)\n                var urls = frames.map((image) => URL.createObjectURL(image))\n                console.log(urls)\n\n            }\n        })*/\n    }\n    console.log(frames)\n    let result\n    gifshot.createGIF({\n        \"images\" : frames\n    }, function(obj){\n        if(!obj.error) {\n            console.log(\"No error\")\n            result = obj.image\n            console.log(obj)\n        } else {\n            console.log(obj.error)\n        }\n    })\n    return \"\"\n    currentPreview = result \n    console.log(result)\n    return URL.createObjectURL(result)\n}\n\nexport const PreviewWindowComponent = ({timeline}) => {\n\n\n    var gifURL = timeline.length > 0 ? URL.createObjectURL(timeline[0].shot) : \"\"\n    if(timeline.length > 0) {\n        gifURL = CreatePreviewGIF(timeline)\n        //gifURL = currentPreviewURL//gif //URL.createObjectURL(gif)\n    }\n    return (\n        <Box\n            fill\n            align=\"center\"\n            justify=\"center\"\n            gap=\"small\"\n            background=\"dark-1\"\n        >\n            <Box\n                width=\"medium\"\n                height=\"medium\"\n                background=\"dark-3\"\n                style={{backgroundImage:`url(${gifURL})`, backgroundSize:'cover', backgroundRepeat: 'no-repeat', backgroundPosition: 'center'}}\n            >\n\n            </Box>\n            <Box\n                round\n            >\n                <Grid\n                    fill\n                    areas={\n                        [\n                            { name: \"back\", start: [0, 0], end: [0,0] },\n                            { name: \"play\", start: [1, 0], end: [1,0] },\n                            { name: \"toEnd\", start: [2, 0], end: [2,0] },\n                        ]\n                    }\n                    columns={[\"flex\", \"flex\", \"flex\"]}\n                    rows={[\"flex\"]}\n                    gap=\"small\"\n                >\n                    <Button gridArea=\"back\" label=\"|<\"/>\n                    <Button gridArea=\"play\" label=\">\" primary/>\n                    <Button gridArea=\"toEnd\" label=\">|\"/>\n\n                </Grid>\n            </Box>\n        </Box>\n    )\n}\n\nconst mapStateToProps = state => ({\n        timeline: state.timeline\n    })\n\nconst mapDispatchToProps = dispathc => ({\n\n    })\n\nexport const PreviewWindow = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(PreviewWindowComponent)"]},"metadata":{},"sourceType":"module"}